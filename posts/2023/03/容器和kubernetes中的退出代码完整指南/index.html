<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>容器和Kubernetes中的退出代码–完整指南 - 斌哥的小站|Binge Blog</title><meta name=Description content="斌哥的小站 | 这里是 @BingeRambo斌哥兰博的个人博客"><meta property="og:title" content="容器和Kubernetes中的退出代码–完整指南"><meta property="og:description" content="Exit Codes In Containers & Kubernetes – The Complete Guide"><meta property="og:type" content="article"><meta property="og:url" content="http://bingerambo.com/posts/2023/03/%E5%AE%B9%E5%99%A8%E5%92%8Ckubernetes%E4%B8%AD%E7%9A%84%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/"><meta property="og:image" content="http://bingerambo.com/logo.png"><meta property="article:published_time" content="2023-03-18T08:43:17+08:00"><meta property="article:modified_time" content="2023-03-18T08:43:17+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://bingerambo.com/logo.png"><meta name=twitter:title content="容器和Kubernetes中的退出代码–完整指南"><meta name=twitter:description content="Exit Codes In Containers & Kubernetes – The Complete Guide"><meta name=application-name content="Binge Blog"><meta name=apple-mobile-web-app-title content="Binge Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://bingerambo.com/posts/2023/03/%E5%AE%B9%E5%99%A8%E5%92%8Ckubernetes%E4%B8%AD%E7%9A%84%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/><link rel=prev href=http://bingerambo.com/posts/2022/12/java%E7%9A%84path%E5%92%8Cpaths/><link rel=next href=http://bingerambo.com/posts/2023/05/go%E7%BC%96%E7%A8%8B%E9%99%B7%E9%98%B1%E5%92%8C%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"容器和Kubernetes中的退出代码–完整指南","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/bingerambo.com\/posts\/2023\/03\/%E5%AE%B9%E5%99%A8%E5%92%8Ckubernetes%E4%B8%AD%E7%9A%84%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97\/"},"image":["http:\/\/bingerambo.com\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"Docker","wordcount":4025,"url":"http:\/\/bingerambo.com\/posts\/2023\/03\/%E5%AE%B9%E5%99%A8%E5%92%8Ckubernetes%E4%B8%AD%E7%9A%84%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97\/","datePublished":"2023-03-18T08:43:17+08:00","dateModified":"2023-03-18T08:43:17+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"http:\/\/bingerambo.com\/images\/avatar.png"},"author":{"@type":"Person","name":"Binge"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="斌哥的小站|Binge Blog"><span class=header-title-pre><i class="fas fa-biking fa-fw"></i></span>Binge Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>文章 </a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签 </a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类 </a><a class=menu-item href=/timeline/><i class="fas fa-cog fa-spin"></i>随记 </a><a class=menu-item href=/about/><i class="fas fa-fw fa-at"></i>关于 </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索 </a><a class=menu-item href=/friend/ title=Friend><i class="fas fa fa-user"></i>友链 </a><a class=menu-item href=https://github.com/bingerambo title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a class=menu-item href=/><i class="fas fa fa-eye"></i><span id=busuanzi_value_site_uv></span></a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="斌哥的小站|Binge Blog"><span class=header-title-pre><i class="fas fa-biking fa-fw"></i></span>Binge Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>文章</a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签</a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类</a><a class=menu-item href=/timeline/><i class="fas fa-cog fa-spin"></i>随记</a><a class=menu-item href=/about/><i class="fas fa-fw fa-at"></i>关于</a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索</a><a class=menu-item href=/friend/ title=Friend><i class="fas fa fa-user"></i>友链</a><a class=menu-item href=https://github.com/bingerambo title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a class=menu-item href=/><i class="fas fa fa-eye"></i><span id=busuanzi_value_site_uv></span></a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">容器和Kubernetes中的退出代码–完整指南</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=http://bingerambo.com title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>Binge</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/docker/><i class="far fa-folder fa-fw"></i>Docker</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2023-03-18>2023-03-18</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 4025 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 9 分钟&nbsp;
<i class="fa fa-eye fa-fw"></i>&nbsp;本文总阅读量 <span id=busuanzi_value_page_pv></span>次&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#what-are-container-exit-codes>What are Container Exit Codes</a></li><li><a href=#the-container-lifecycle>The Container Lifecycle</a></li><li><a href=#understanding-container-exit-codes>Understanding Container Exit Codes</a><ul><li><a href=#exit-code-0-purposely-stopped>Exit Code 0: Purposely Stopped</a></li><li><a href=#exit-code-1-application-error>Exit Code 1: Application Error</a></li><li><a href=#exit-code-125-container-failed-to-run>Exit Code 125: Container Failed to Run</a></li><li><a href=#exit-code-126-command-invoke-error>Exit Code 126: Command Invoke Error</a></li><li><a href=#exit-code-127-file-or-directory-not-found>Exit Code 127: File or Directory Not Found</a></li><li><a href=#exit-code-128-invalid-argument-used-on-exit>Exit Code 128: Invalid Argument Used on Exit</a></li><li><a href=#exit-code-134-abnormal-termination-sigabrt>Exit Code 134: Abnormal Termination (SIGABRT)</a></li><li><a href=#exit-code-137-immediate-termination-sigkill>Exit Code 137: Immediate Termination (SIGKILL)</a></li><li><a href=#exit-code-139-segmentation-fault-sigsegv>Exit Code 139: Segmentation Fault (SIGSEGV)</a></li><li><a href=#exit-code-143-graceful-termination-sigterm>Exit Code 143: Graceful Termination (SIGTERM)</a></li></ul></li><li><a href=#exit-code-1-application-error-1>Exit Code 1: Application Error</a></li><li><a href=#exit-code-125>Exit Code 125</a><ul><li><a href=#exit-code-125-container-failed-to-run-1>Exit Code 125: Container Failed to Run</a></li></ul></li><li><a href=#exit-code-126-command-invoke-error-1>Exit Code 126: Command Invoke Error</a></li><li><a href=#exit-code-127-file-or-directory-not-found-1>Exit Code 127: File or Directory Not Found</a></li><li><a href=#exit-code-128-invalid-argument-used-on-exit-1>Exit Code 128: Invalid Argument Used on Exit</a></li><li><a href=#exit-code-134-abnormal-termination-sigabrt-1>Exit Code 134: Abnormal Termination (SIGABRT)</a></li><li><a href=#exit-code-137-immediate-termination-sigkill-1>Exit Code 137: Immediate Termination (SIGKILL)</a></li><li><a href=#exit-code-139-segmentation-fault-sigsegv-1>Exit Code 139: Segmentation Fault (SIGSEGV)</a></li><li><a href=#exit-code-143-graceful-termination-sigterm-1>Exit Code 143: Graceful Termination (SIGTERM)</a></li><li><a href=#exit-code-255-exit-status-out-of-range>Exit Code 255: Exit Status Out Of Range</a></li><li><a href=#which-kubernetes-errors-are-related-to-container-exit-codes>Which Kubernetes Errors are Related to Container Exit Codes?</a></li><li><a href=#troubleshooting-kubernetes-pod-termination-with-komodor>Troubleshooting Kubernetes Pod Termination with Komodor</a></li></ul></nav></div></div><div class=content id=content><p>Exit Codes In Containers & Kubernetes – The Complete Guide</p><h2 id=what-are-container-exit-codes>What are Container Exit Codes</h2><p>Exit codes are used by container engines, when a container terminates, to report why it was terminated.</p><p>If you are a Kubernetes user, container failures are one of the most common causes of pod exceptions, and understanding container exit codes can help you get to the root cause of pod failures when <a href=https://komodor.com/learn/kubernetes-troubleshooting-the-complete-guide/ target=_blank rel="noopener noreffer">troubleshooting</a>.</p><p>The most common exit codes used by containers are:</p><table><thead><tr><th style=text-align:left>CODE #</th><th style=text-align:left>NAME</th><th style=text-align:left>WHAT IT MEANS</th></tr></thead><tbody><tr><td style=text-align:left>Exit Code 0</td><td style=text-align:left>Purposely stopped</td><td style=text-align:left>Used by developers to indicate that the container was automatically stopped</td></tr><tr><td style=text-align:left><a href=https://komodor.com/learn/how-to-fix-container-terminated-with-exit-code-1/ target=_blank rel="noopener noreffer">Exit Code 1</a></td><td style=text-align:left>Application error</td><td style=text-align:left>Container was stopped due to application error or incorrect reference in the image specification</td></tr><tr><td style=text-align:left>Exit Code 125</td><td style=text-align:left>Container failed to run error</td><td style=text-align:left>The docker run command did not execute successfully</td></tr><tr><td style=text-align:left>Exit Code 126</td><td style=text-align:left>Command invoke error</td><td style=text-align:left>A command specified in the image specification could not be invoked</td></tr><tr><td style=text-align:left>Exit Code 127</td><td style=text-align:left>File or directory not found</td><td style=text-align:left>File or directory specified in the image specification was not found</td></tr><tr><td style=text-align:left>Exit Code 128</td><td style=text-align:left>Invalid argument used on exit</td><td style=text-align:left>Exit was triggered with an invalid exit code (valid codes are integers between 0-255)</td></tr><tr><td style=text-align:left>Exit Code 134</td><td style=text-align:left>Abnormal termination (SIGABRT)</td><td style=text-align:left>The container aborted itself using the abort() function.</td></tr><tr><td style=text-align:left>Exit Code 137</td><td style=text-align:left>Immediate termination (<a href=https://komodor.com/learn/what-is-sigkill-signal-9-fast-termination-of-linux-containers/ target=_blank rel="noopener noreffer">SIGKILL</a>)</td><td style=text-align:left>Container was immediately terminated by the operating system via SIGKILL signal</td></tr><tr><td style=text-align:left>Exit Code 139</td><td style=text-align:left>Segmentation fault (<a href=https://komodor.com/learn/sigsegv-segmentation-faults-signal-11-exit-code-139/ target=_blank rel="noopener noreffer">SIGSEGV</a>)</td><td style=text-align:left>Container attempted to access memory that was not assigned to it and was terminated</td></tr><tr><td style=text-align:left>Exit Code 143</td><td style=text-align:left>Graceful termination (<a href=https://komodor.com/learn/sigterm-signal-15-exit-code-143-linux-graceful-termination/ target=_blank rel="noopener noreffer">SIGTERM</a>)</td><td style=text-align:left>Container received warning that it was about to be terminated, then terminated</td></tr><tr><td style=text-align:left>Exit Code 255</td><td style=text-align:left>Exit Status Out Of Range</td><td style=text-align:left>Container exited, returning an exit code outside the acceptable range, meaning the cause of the error is not known</td></tr></tbody></table><p>Below we’ll explain how to troubleshoot failed containers on a self-managed host and in Kubernetes, and provide more details on all of the exit codes listed above.</p><p>This is part of an extensive series of guides about <a href=https://lumigo.io/what-is-observability-concepts-use-cases-and-technologies/ target=_blank rel="noopener noreffer">Observability</a>.</p><h2 id=the-container-lifecycle>The Container Lifecycle</h2><p>To better understand the causes of container failure, let’s discuss the lifecycle of a container first. Taking Docker as an example – at any given time, a Docker container can be in one of several states:</p><ul><li><strong>Created</strong> – the Docker container is created but not started yet (this is the status after running docker create, but before actually running the container)</li><li><strong>Up</strong> – the Docker container is currently running. This means the operating system process managed by the container is running. This happens when you use the commands docker start or docker run can happen using docker start or docker run.</li><li><strong>Paused</strong> – the container process was running, but Docker purposely paused the container. Typically this happens when you run the Docker pause command</li><li><strong>Exited</strong> – the Docker container has been terminated, usually because the container’s process was killed</li></ul><p>When a container reaches the <strong>Exited</strong> status, Docker will report an exit code in the logs, to inform you what happened to the container that caused it to shut down.</p><h2 id=understanding-container-exit-codes>Understanding Container Exit Codes</h2><p>Below we cover each of the exit codes in more detail.</p><h3 id=exit-code-0-purposely-stopped>Exit Code 0: Purposely Stopped</h3><p>Exit Code 0 is triggered by developers when they purposely stop their container after a task completes. Technically, Exit Code 0 means that the foreground process is not attached to a specific container.</p><p><strong>What to do if a container terminated with Exit Code 0?</strong></p><ol><li>Check the container logs to identify which library caused the container to exit</li><li>Review the code of the existing library and identify why it triggered Exit Code 0, and whether it is functioning correctly</li></ol><h3 id=exit-code-1-application-error>Exit Code 1: Application Error</h3><p>Exit Code 1 indicates that the container was stopped due to one of the following:</p><ul><li><strong>An application error</strong> – this could be a simple programming error in code run by the container, such as “divide by zero”, or advanced errors related to the runtime environment, such as Java, Python, etc</li><li><strong>An invalid reference</strong> – this means the image specification refers to a file that does not exist in the container image</li></ul><p><strong>What to do if a container terminated with Exit Code 1?</strong></p><ol><li>Check the container log to see if one of the files listed in the image specification could not be found. If this is the issue, correct the image specification to point to the correct path and filename.</li><li>If you cannot find an incorrect file reference, check the container logs for an application error, and debug the library that caused the error.</li></ol><h3 id=exit-code-125-container-failed-to-run>Exit Code 125: Container Failed to Run</h3><p>Exit Code 125 means that the command is used to run the container. For example <code>docker run</code> was invoked in the system shell but did not execute successfully. Here are common reasons this might happen:</p><ul><li>An undefined flag was used in the command, for example <code>docker run --abcd</code></li><li>The user-defined in the image specification does not have sufficient permissions on the machine</li><li>Incompatibility between the container engine and the host operating system or hardware</li></ul><p><strong>What to do if a container terminated with Exit Code 125?</strong></p><ol><li>Check if the command used to run the container uses the proper syntax</li><li>Check if the user running the container, or the context in which the command is executed in the image specification, has sufficient permissions to create containers on the host</li><li>If your container engine provides other options for running a container, try them. For example, in Docker, try <code>docker start</code> instead of <code>docker run</code></li><li>Test if you are able to run other containers on the host using the same username or context. If not, reinstall the container engine, or resolve the underlying compatibility issue between the container engine and the host setup</li></ol><h3 id=exit-code-126-command-invoke-error>Exit Code 126: Command Invoke Error</h3><p>Exit Code 126 means that a command used in the container specification could not be invoked. This is often the cause of a missing dependency or an error in a continuous integration script used to run the container.</p><p><strong>What to do if a container terminated with Exit Code 126?</strong></p><ol><li>Check the container logs to see which command could not be invoked</li><li>Try running the container specification without the command to ensure you isolate the problem</li><li>Troubleshoot the command to ensure you are using the correct syntax and all dependencies are available</li><li>Correct the container specification and retry running the container</li></ol><h3 id=exit-code-127-file-or-directory-not-found>Exit Code 127: File or Directory Not Found</h3><p>Exit Code 127 means a command specified in the container specification refers to a non-existent file or directory.</p><p><strong>What to do if a container terminated with Exit Code 127?</strong></p><p>Same as Exit Code 126, identify the failing command and make sure you reference a valid filename and file path available within the container image.</p><h3 id=exit-code-128-invalid-argument-used-on-exit>Exit Code 128: Invalid Argument Used on Exit</h3><p>Exit Code 128 means that code within the container triggered an exit command, but did not provide a valid exit code. The Linux <code>exit</code> command only allows integers between 0-255, so if the process was exited with, for example, <code>exit code 3.5</code>, the logs will report Exit Code 128.</p><p><strong>What to do if a container terminated with Exit Code 128?</strong></p><ol><li>Check the container logs to identify which library caused the container to exit.</li><li>Identify where the offending library uses the <code>exit</code> command, and correct it to provide a valid exit code.</li></ol><h3 id=exit-code-134-abnormal-termination-sigabrt>Exit Code 134: Abnormal Termination (SIGABRT)</h3><p>Exit Code 134 means that the container abnormally terminated itself, closed the process and flushed open streams. This operation is irreversible, like SIGKILL (see Exit Code 137 below). A process can trigger SIGABRT by doing one of the following:</p><p>Calling the <code>abort()</code> function in the <code>libc</code> library
Calling the<code> assert()</code> macro, used for debugging. The process is then aborted if the assertion is false.</p><p><strong>What to do if a container terminated with Exit Code 134?</strong></p><ol><li>Check container logs to see which library triggered the SIGABRT signal</li><li>Check if process abortion was planned (for example because the library was in debug mode), and if not, troubleshoot the library and modify it to avoid aborting the container.</li></ol><h3 id=exit-code-137-immediate-termination-sigkill>Exit Code 137: Immediate Termination (SIGKILL)</h3><p>Exit Code 137 means that the container has received a SIGKILL signal from the host operating system. This signal instructs a process to terminate immediately, with no grace period. This can be either:</p><ul><li>Triggered when a container is killed via the container engine, for example when using the <code>docker kill</code> command</li><li>Triggered by a Linux user sending a <code>kill -9</code> command to the process</li><li>Triggered by Kubernetes after attempting to terminate a container and waiting for a grace period of 30 seconds (by default)</li><li>Triggered automatically by the host, usually due to running out of memory. In this case, the <code>docker inspect</code> command will indicate an <code>OOMKilled</code> error.</li></ul><p><strong>What to do if a container terminated with Exit Code 137?</strong></p><ol><li>Check logs on the host to see what happened prior to the container terminating, and whether it previously received a SIGTERM signal (graceful termination) before receiving SIGKILL</li><li>If there was a prior SIGTERM signal, check if your container process handles SIGTERM and is able to gracefully terminate</li><li>If there was no SIGTERM and the container reported an <code>OOMKilled</code> error, troubleshoot memory issues on the host</li></ol><p><a href=https://komodor.com/learn/what-is-sigkill-signal-9-fast-termination-of-linux-containers/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGKILL signal &#187;</a></p><h3 id=exit-code-139-segmentation-fault-sigsegv>Exit Code 139: Segmentation Fault (SIGSEGV)</h3><p>Exit Code 139 means that the container received a SIGSEGV signal from the operating system. This indicates a segmentation error – a memory violation, caused by a container trying to access a memory location to which it does not have access. There are three common causes of SIGSEGV errors:</p><ol><li><strong>Coding error</strong>—container process did not initialize properly, or it tried to access memory through a pointer to previously freed memory</li><li><strong>Incompatibility between binaries and libraries</strong>—container process runs a binary file that is not compatible with a shared library, and thus may try to access inappropriate memory addresses</li><li><strong>Hardware incompatibility or misconfiguration</strong>—if you see multiple segmentation errors across multiple libraries, there may be a problem with memory subsystems on the host or a system configuration issue</li></ol><p><strong>What to do if a container terminated with Exit Code 139?</strong></p><ol><li>Check if the container process handles SIGSEGV. On both Linux and Windows, you can handle a container’s response to segmentation violations. For example, the container can collect and report a stack trace</li><li>If you need to further troubleshoot SIGSEGV, you may need to set the operating system to allow programs to run even after a segmentation fault occurs, to allow for investigation and debugging. Then, try to intentionally cause a segmentation violation and debug the library causing the issue</li><li>If you cannot replicate the issue, check memory subsystems on the host and troubleshoot memory configuration</li></ol><p><a href=https://komodor.com/learn/sigsegv-segmentation-faults-signal-11-exit-code-139/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGSEGV signal &#187;</a></p><h3 id=exit-code-143-graceful-termination-sigterm>Exit Code 143: Graceful Termination (SIGTERM)</h3><p>Exit Code 143 means that the container received a SIGTERM signal from the operating system, which asks the container to gracefully terminate, and the container succeeded in gracefully terminating (otherwise you will see Exit Code 137). This exit code can be:</p><ul><li>Triggered by the container engine stopping the container, for example when using the <code>docker stop</code> or <code>docker-compose</code> down commands</li><li>Triggered by Kubernetes setting a pod to <strong>Terminating</strong> status, and giving containers a 30 second period to gracefully shut down</li></ul><p><strong>What to do if a container terminated with Exit Code 143?</strong></p><p>Check host logs to see the context in which the operating system sent the SIGTERM signal. If you are using Kubernetes, check the kubelet logs to see if and when the pod was shut down.</p><p>In general, Exit Code 143 does not require troubleshooting. It means the container was properly shut down after being instructed to do so by the host.</p><p><a href=https://komodor.com/learn/sigterm-signal-15-exit-code-143-linux-graceful-termination/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGTERM signal &#187;</a></p><h2 id=exit-code-1-application-error-1>Exit Code 1: Application Error</h2><p>Exit Code 1 indicates that the container was stopped due to one of the following:</p><ul><li><strong>An application error</strong> – this could be a simple programming error in code run by the container, such as “divide by zero”, or advanced errors related to the runtime environment, such as Java, Python, etc</li><li><strong>An invalid reference</strong> – this means the image specification refers to a file that does not exist in the container image</li></ul><p><strong>What to do if a container terminated with Exit Code 1?</strong></p><ol><li>Check the container log to see if one of the files listed in the image specification could not be found. If this is the issue, correct the image specification to point to the correct path and filename.</li><li>If you cannot find an incorrect file reference, check the container logs for an application error, and debug the library that caused the error.</li></ol><h2 id=exit-code-125>Exit Code 125</h2><h3 id=exit-code-125-container-failed-to-run-1>Exit Code 125: Container Failed to Run</h3><p>Exit Code 125 means that the command is used to run the container. For example <code>docker run</code> was invoked in the system shell but did not execute successfully. Here are common reasons this might happen:</p><ul><li>An undefined flag was used in the command, for example <code>docker run --abcd</code></li><li>The user-defined in the image specification does not have sufficient permissions on the machine</li><li>Incompatibility between the container engine and the host operating system or hardware</li></ul><p><strong>What to do if a container terminated with Exit Code 125?</strong></p><ol><li>Check if the command used to run the container uses the proper syntax</li><li>Check if the user running the container, or the context in which the command is executed in the image specification, has sufficient permissions to create containers on the host</li><li>If your container engine provides other options for running a container, try them. For example, in Docker, try <code>docker start</code> instead of <code>docker run</code></li><li>Test if you are able to run other containers on the host using the same username or context. If not, reinstall the container engine, or resolve the underlying compatibility issue between the container engine and the host setup</li></ol><h2 id=exit-code-126-command-invoke-error-1>Exit Code 126: Command Invoke Error</h2><p>Exit Code 126 means that a command used in the container specification could not be invoked. This is often the cause of a missing dependency or an error in a continuous integration script used to run the container.</p><p><strong>What to do if a container terminated with Exit Code 126?</strong></p><ol><li>Check the container logs to see which command could not be invoked</li><li>Try running the container specification without the command to ensure you isolate the problem</li><li>Troubleshoot the command to ensure you are using the correct syntax and all dependencies are available</li><li>Correct the container specification and retry running the container</li></ol><h2 id=exit-code-127-file-or-directory-not-found-1>Exit Code 127: File or Directory Not Found</h2><p>Exit Code 127 means a command specified in the container specification refers to a non-existent file or directory.</p><p><strong>What to do if a container terminated with Exit Code 127?</strong></p><p>Same as Exit Code 126 above, identify the failing command and make sure you reference a valid filename and file path available within the container image.</p><h2 id=exit-code-128-invalid-argument-used-on-exit-1>Exit Code 128: Invalid Argument Used on Exit</h2><p>Exit Code 128 means that code within the container triggered an exit command, but did not provide a valid exit code. The Linux <code>exit</code> command only allows integers between 0-255, so if the process was exited with, for example, <code>exit code 3.5</code>, the logs will report Exit Code 128.</p><p><strong>What to do if a container terminated with Exit Code 128?</strong></p><ol><li>Check the container logs to identify which library caused the container to exit.</li><li>Identify where the offending library uses the <code>exit</code> command, and correct it to provide a valid exit code.</li></ol><h2 id=exit-code-134-abnormal-termination-sigabrt-1>Exit Code 134: Abnormal Termination (SIGABRT)</h2><p>Exit Code 134 means that the container abnormally terminated itself, closed the process and flushed open streams. This operation is irreversible, like SIGKILL (see Exit Code 137 below). A process can trigger SIGABRT by doing one of the following:</p><p>Calling the <code>abort()</code> function in the <code>libc</code> library
Calling the<code> assert()</code> macro, used for debugging. The process is then aborted if the assertion is false.</p><p><strong>What to do if a container terminated with Exit Code 134?</strong></p><ol><li>Check container logs to see which library triggered the SIGABRT signal</li><li>Check if process abortion was planned (for example because the library was in debug mode), and if not, troubleshoot the library and modify it to avoid aborting the container.</li></ol><h2 id=exit-code-137-immediate-termination-sigkill-1>Exit Code 137: Immediate Termination (SIGKILL)</h2><p>Exit Code 137 means that the container has received a SIGKILL signal from the host operating system. This signal instructs a process to terminate immediately, with no grace period. This can be either:</p><ul><li>Triggered when a container is killed via the container engine, for example when using the <code>docker kill</code> command</li><li>Triggered by a Linux user sending a <code>kill -9</code> command to the process</li><li>Triggered by Kubernetes after attempting to terminate a container and waiting for a grace period of 30 seconds (by default)</li><li>Triggered automatically by the host, usually due to running out of memory. In this case, the <code>docker inspect</code> command will indicate an <code>OOMKilled</code> error.</li></ul><p><strong>What to do if a container terminated with Exit Code 137?</strong></p><ol><li>Check logs on the host to see what happened prior to the container terminating, and whether it previously received a SIGTERM signal (graceful termination) before receiving SIGKILL</li><li>If there was a prior SIGTERM signal, check if your container process handles SIGTERM and is able to gracefully terminate</li><li>If there was no SIGTERM and the container reported an <code>OOMKilled</code> error, troubleshoot memory issues on the host</li></ol><p><a href=https://komodor.com/learn/what-is-sigkill-signal-9-fast-termination-of-linux-containers/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGKILL signal &#187;</a></p><h2 id=exit-code-139-segmentation-fault-sigsegv-1>Exit Code 139: Segmentation Fault (SIGSEGV)</h2><p>Exit Code 139 means that the container received a SIGSEGV signal from the operating system. This indicates a segmentation error – a memory violation, caused by a container trying to access a memory location to which it does not have access. There are three common causes of SIGSEGV errors:</p><ol><li><strong>Coding error</strong>—container process did not initialize properly, or it tried to access memory through a pointer to previously freed memory</li><li><strong>Incompatibility between binaries and libraries</strong>—container process runs a binary file that is not compatible with a shared library, and thus may try to access inappropriate memory addresses</li><li><strong>Hardware incompatibility or misconfiguration</strong>—if you see multiple segmentation errors across multiple libraries, there may be a problem with memory subsystems on the host or a system configuration issue</li></ol><p><strong>What to do if a container terminated with Exit Code 139?</strong></p><ol><li>Check if the container process handles SIGSEGV. On both Linux and Windows, you can handle a container’s response to segmentation violations. For example, the container can collect and report a stack trace</li><li>If you need to further troubleshoot SIGSEGV, you may need to set the operating system to allow programs to run even after a segmentation fault occurs, to allow for investigation and debugging. Then, try to intentionally cause a segmentation violation and debug the library causing the issue</li><li>If you cannot replicate the issue, check memory subsystems on the host and troubleshoot memory configuration</li></ol><p><a href=https://komodor.com/learn/sigsegv-segmentation-faults-signal-11-exit-code-139/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGSEGV signal &#187;</a></p><h2 id=exit-code-143-graceful-termination-sigterm-1>Exit Code 143: Graceful Termination (SIGTERM)</h2><p>Exit Code 143 means that the container received a SIGTERM signal from the operating system, which asks the container to gracefully terminate, and the container succeeded in gracefully terminating (otherwise you will see Exit Code 137). This exit code can be:</p><ul><li>Triggered by the container engine stopping the container, for example when using the <code>docker stop</code> or <code>docker-compose</code> down commands</li><li>Triggered by Kubernetes setting a pod to <strong>Terminating</strong> status, and giving containers a 30 second period to gracefully shut down</li></ul><p><strong>What to do if a container terminated with Exit Code 143?</strong></p><p>Check host logs to see the context in which the operating system sent the SIGTERM signal. If you are using Kubernetes, check the kubelet logs to see if and when the pod was shut down.</p><p>In general, Exit Code 143 does not require troubleshooting. It means the container was properly shut down after being instructed to do so by the host.</p><p><a href=https://komodor.com/learn/sigterm-signal-15-exit-code-143-linux-graceful-termination/ target=_blank rel="noopener noreffer">Learn more in our detailed guide to the SIGTERM signal &#187;</a></p><h2 id=exit-code-255-exit-status-out-of-range>Exit Code 255: Exit Status Out Of Range</h2><p>When you see exit code 255, it implies the main entrypoint of a container stopped with that status. It means that the container stopped, but it is not known for what reason.</p><p><strong>What to do if a container terminated with Exit Code 255?</strong></p><ol><li>If the container is running in a virtual machine, first try removing overlay networks configured on the virtual machine and recreating them.</li><li>If this does not solve the problem, try deleting and recreating the virtual machine, then rerunning the container on it.</li><li>Failing the above, bash into the container and examine logs or other clues about the entrypoint process and why it is failing.</li></ol><h2 id=which-kubernetes-errors-are-related-to-container-exit-codes>Which Kubernetes Errors are Related to Container Exit Codes?</h2><p>Whenever containers fail within a pod, or Kubernetes instructs a pod to terminate for any reason, containers will shut down with exit codes. Identifying the exit code can help you understand the underlying cause of a pod exception.</p><p>You can use the following command to view pod errors: <code>kubectl describe pod [name]</code></p><p>The result will look something like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>Containers</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=nt>kubedns</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=nt>Container ID</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>Image</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>Image ID</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>Ports</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>Host Ports</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>Args</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span><span class=w></span><span class=nt>State</span><span class=p>:</span><span class=w> </span><span class=l>Running</span><span class=w>
</span><span class=w>   </span><span class=nt>Started</span><span class=p>:</span><span class=w> </span><span class=l>Fri, 15 Oct 2021 12:06:01 +0800</span><span class=w>
</span><span class=w></span><span class=nt>Last State</span><span class=p>:</span><span class=w> </span><span class=l>Terminated</span><span class=w>
</span><span class=w>   </span><span class=nt>Reason</span><span class=p>:</span><span class=w> </span><span class=l>Error</span><span class=w>
</span><span class=w>   </span><span class=nt>Exit Code</span><span class=p>:</span><span class=w> </span><span class=m>255</span><span class=w>
</span><span class=w>   </span><span class=nt>Started</span><span class=p>:</span><span class=w> </span><span class=l>Fri, 15 Oct 2021 11:43:42 +0800</span><span class=w>
</span><span class=w>   </span><span class=nt>Finished</span><span class=p>:</span><span class=w> </span><span class=l>Fri, 15 Oct 2021 12:05:17 +0800</span><span class=w>
</span><span class=w></span><span class=nt>Ready</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span><span class=w></span><span class=nt>Restart Count</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></code></pre></td></tr></table></div></div><p>Use the Exit Code provided by <code>kubectl</code> to troubleshoot the issue:</p><ul><li><strong>If the Exit Code is 0</strong> – the container exited normally, no troubleshooting is required</li><li><strong>If the Exit Code is between1-128</strong> – the container terminated due to an internal error, such as a missing or invalid command in the image specification</li><li><strong>If the Exit Code is between 129-255</strong> – the container was stopped as the result of an operating signal, such as SIGKILL or SIGINT</li><li><strong>If the Exit Code was</strong> <code>exit(-1)</code> or another value outside the 0-255 range, <code>kubectl</code> translates it to a value within the 0-255 range.</li></ul><p>Refer to the relevant section above to see how to troubleshoot the container for each exit code.</p><h2 id=troubleshooting-kubernetes-pod-termination-with-komodor>Troubleshooting Kubernetes Pod Termination with Komodor</h2><p>As a Kubernetes administrator or user, pods or containers terminating unexpectedly can be a pain and can result in severe production issues. The troubleshooting process in Kubernetes is complex and, without the right tools, can be stressful, ineffective, and time-consuming.</p><p>Some best practices can help minimize the chances of container failure affecting your applications, but eventually, something will go wrong—simply because it can.</p><p>This is the reason why we created Komodor, a tool that helps dev and ops teams stop wasting their precious time looking for needles in (hay)stacks every time things go wrong.</p><p>Acting as a single source of truth (SSOT) for all of your k8s troubleshooting needs, Komodor offers:</p><ul><li><strong>Change intelligence:</strong> Every issue is a result of a change. Within seconds we can help you understand exactly who did what and when.</li><li><strong>In-depth visibility:</strong> A complete activity timeline, showing all code and config changes, deployments, alerts, code diffs, pod logs and etc. All within one pane of glass with easy drill-down options.</li><li><strong>Insights into service dependencies:</strong> An easy way to understand cross-service changes and visualize their ripple effects across your entire system.</li><li><strong>Seamless notifications:</strong> Direct integration with your existing communication channels (e.g., Slack) so you’ll have all the information you need, when you need it.</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2023-03-18</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/docker/>Docker</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/2022/12/java%E7%9A%84path%E5%92%8Cpaths/ class=prev rel=prev title=Java的path和paths><i class="fas fa-angle-left fa-fw"></i>Java的path和paths</a>
<a href=/posts/2023/05/go%E7%BC%96%E7%A8%8B%E9%99%B7%E9%98%B1%E5%92%8C%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/ class=next rel=next title=GO编程陷阱和常见错误>GO编程陷阱和常见错误<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2016 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=bingerambo.com target=_blank>Binge</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=http://bingerambo.com/ target=_blank>bingerambo.com</a></span></div><div class=footer-line><i class="fa fa-eye"></i>本站总访问量<span id=busuanzi_value_site_pv></span>次
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"bingerambo/myblog-comments"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-81425808-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-81425808-1" async></script><script src=https://libs.baidu.com/jquery/2.1.4/jquery.min.js></script><script src=https://cdn.bootcdn.net/ajax/libs/jquery-backstretch/2.1.18/jquery.backstretch.min.js></script><script type=text/javascript src=/js/custom.js></script><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?c0176279eee823ce422da4e8d06708f9";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script></body></html>